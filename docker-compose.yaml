version: "3.8"
services:
  filebrowser:
    image: filebrowser/filebrowser
    container_name: filebrowser
    restart: unless-stopped
    volumes:
      - ./stacks:/srv               # Carpeta para tus archivos
      - ./filebrowser.db:/database.db # Archivo de base de datos
      - ./.filebrowser.json:/.filebrowser.json # Archivo de configuración
    environment:
      UID: 1000                      # Establecer UID
      GID: 1000                      # Establecer GID
    ports:
      - "5040:8080"                  # Exponer puerto 5040 dentro del contenedor y del host
    user: "1000:1000"                # Usar UID y GID del sistema para permisos adecuados
    networks:
      - webnet                       # Conectar a la red webnet

  nginx:
    image: nginx:alpine
    container_name: nginx_proxy
    ports:
      - "8080:80"                    # Puerto HTTP
      - "8443:443"                   # Puerto HTTPS
    volumes:
      - ./.nginx/nginx.conf:/etc/nginx/conf.d/default.conf # Archivo de configuración de NGINX
      - ./.nginx/ssl:/etc/nginx/ssl   # Carpeta con certificados SSL (si los usas)
    networks:
      - webnet                       # Conectar a la misma red webnet
    depends_on:
      - filebrowser

networks:
  webnet:
    driver: bridge                   # Especificar el driver de la red
<<<<<<< HEAD

=======
>>>>>>> cb3415415124dc97ea2bdc77082e633e73c08d5f
